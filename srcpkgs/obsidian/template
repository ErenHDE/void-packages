# Template file for 'obsidian'
pkgname=obsidian
version=1.11.7
revision=1
archs="x86_64 aarch64"
depends="fontconfig zlib hicolor-icon-theme fuse3 electron35"
short_desc="Knowledge base that works on top of local Markdown files"
maintainer="Eren Öztürk <erenozturkhde@gmail.com>"
license="custom:Obsidian"
homepage="https://obsidian.md"
repository=nonfree
restricted=yes
nostrip=yes
nocross=yes
case "$XBPS_TARGET_MACHINE" in
x86_64)
	distfiles="https://github.com/obsidianmd/obsidian-releases/releases/download/v${version}/obsidian-${version}.tar.gz"
	checksum=1eba9e149d82e6e670d0806d0fdcbad3b57ad34edf3b09c0d0a9c0f377305a38
	;;
aarch64)
	distfiles="https://github.com/obsidianmd/obsidian-releases/releases/download/v${version}/obsidian-${version}-arm64.tar.gz"
	checksum=41bfe126ac0ca55fc1019aa4f663a155586347e90917e96b257fc726a4e90c20
	;;
*)
	broken="No distfiles available for this target"
	;;
esac

do_install() {
	vbin "${FILESDIR}/obsidian.sh" obsidian
	vinstall "${FILESDIR}/obsidian.desktop" 644 usr/share/applications

	vinstall resources/icon.png 644 usr/share/pixmaps obsidian.png
	vlicense "${FILESDIR}/LICENSE-Obsidian"

	vlicense LICENSE.electron.txt
	vlicense LICENSES.chromium.html

	vmkdir usr/lib/obsidian
	vcopy "resources/*" usr/lib/obsidian

}
